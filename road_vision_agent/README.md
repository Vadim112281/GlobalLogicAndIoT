# Лабораторна робота №1

# Agent для моніторингу стану дорожнього покриття

## Опис

Даний проєкт є реалізацією Agent частини системи моніторингу стану
дорожнього покриття.

Agent імітує роботу сенсорів автомобіля, читаючи дані з CSV файлів, та
відправляє їх у MQTT broker у форматі JSON.

Дані сенсорів включають:

-   акселерометр (x, y, z)
-   GPS координати (longitude, latitude)
-   час отримання даних

Agent працює безперервно та відправляє дані з заданим інтервалом.

------------------------------------------------------------------------

## Архітектура

CSV файли → FileDatasource → Domain Model → JSON → MQTT Broker

------------------------------------------------------------------------

## Структура проєкту

src/ - main.py --- основний файл запуску - config.py --- конфігурація
MQTT - file_datasource.py --- читання CSV - domain/ --- доменні моделі -
schema/ --- схеми JSON - data/ --- CSV файли

docker/ - docker-compose.yaml - mosquitto/

Dockerfile\
requirements.txt\
README.md

------------------------------------------------------------------------

## Реалізація FileDatasource

FileDatasource відповідає за читання даних з CSV файлів.

Основні методи:

### startReading()

Відкриває CSV файли та створює CSV reader.

### read()

Виконує:

-   читає наступний рядок accelerometer.csv
-   читає наступний рядок gps.csv
-   створює об'єкт Accelerometer
-   створює об'єкт Gps
-   створює об'єкт AggregatedData
-   повертає AggregatedData

AggregatedData містить:

-   accelerometer
-   gps
-   time

Після цього дані відправляються через MQTT.

### stopReading()

Закриває CSV файли та звільняє ресурси.

------------------------------------------------------------------------

## Нескінченне читання

Реалізовано нескінченний цикл читання.

Після досягнення кінця файлу читання починається з початку.

Це дозволяє Agent працювати без зупинки.

------------------------------------------------------------------------

## MQTT

Дані відправляються у topic:

agent_data_topic

Формат повідомлення:

{ "accelerometer": { "x": 1, "y": 2, "z": 3 }, "gps": { "longitude":
24.02, "latitude": 49.84 }, "time": "2026-01-01T12:00:00" }

------------------------------------------------------------------------

## Запуск

Використовується Docker.

Команди:

cd docker

docker compose up --build

------------------------------------------------------------------------

## Перевірка

Використати MQTT Explorer.

Host: localhost\
Port: 1883\
Topic: agent_data_topic

------------------------------------------------------------------------

## Висновок

Було реалізовано Agent, який читає дані сенсорів з CSV файлів та
відправляє їх у MQTT broker.

Було реалізовано клас FileDatasource для роботи з даними.

Agent працює безперервно та успішно передає дані.
